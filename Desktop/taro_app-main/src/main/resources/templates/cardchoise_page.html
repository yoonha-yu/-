<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>카드선택</title>
    <style>
        #shuffleButton {
            background: linear-gradient(to bottom right, #b030b0, #d47492);  /* 보라빛 그라데이션 배경 */
            color: white;                           /* 글자 색상 - 흰색으로 설정 */
            border: none;                           /* 기본 테두리 제거 */
            border-radius: 20px;                    /* 부드러운 모서리를 위해 둥글게 설정 */
            padding: 7px 16px;                     /* 버튼 크기 조정 */
            font-size: 16px;                        /* 글꼴 크기 설정 */
            cursor: pointer;                        /* 마우스 포인터 설정 */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);  /* 그림자 추가로 입체감 부여 */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* 부드러운 애니메이션 효과 */
        }
        #shuffleButton:hover {
            transform: translateY(-3px);            /* 호버 시 살짝 떠오르는 효과 */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);  /* 그림자 강도 조정 */
        }

        #shuffleButton:active {
            transform: translateY(2px);             /* 클릭 시 눌리는 느낌 추가 */
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);  /* 클릭 시 그림자 감소 */
        }
        .navbar-custom .nav-link {
            color: #6a0dad; /* 진한 연보라색 글씨 */
            font-weight: bold; /* 글씨를 더 진하게 설정 */
        }

        body {
            background: linear-gradient(to bottom right, #d47492, #b030b0); /* 어두운 배경 색상 그라데이션 */
            height: 100vh; /* 전체 화면 높이 */
            margin: 0; /* 기본 마진 제거 */
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            color: #6a0dad;
        }

        h2 {
            font-size: 1.2em;
            color: #6a0dad;
            margin-bottom: 20px;
        }

        .card-container {
            position: relative;
            left: -50px;
            display: flex;
            justify-content: center;
            align-items: flex-end; /* 아래쪽 정렬 */
            margin: 20px auto;
            height: auto; /* 컨테이너 높이를 자동으로 설정 */
            width: 80%; /* 컨테이너 너비를 적절히 설정 */
        }

        .card {
            width: 180px;
            height: 300px;
            border-radius: 10px;
            border: 2px solid #7a0dcf;
            background: url('https://img.freepik.com/premium-vector/vector-kawaii-illustration-of-snake-and-tarot-cards-delicate-pastel-colors_750969-260.jpg');
            background-size: cover;
            background-position: center;  /* 이미지를 중앙에 위치 */
            background-repeat: no-repeat;
            transition: transform 0.2s ease;
            z-index: 1;
            margin-right: -165px; /* 카드 간의 겹침을 위해서 설정 */
        }
         /* 카드가 자연스럽게 겹치면서 좌우로 회전하도록 설정 */
        .card:nth-child(1) { transform: rotate(-7.8deg); }
        .card:nth-child(2) { transform: rotate(-7.6deg); }
        .card:nth-child(3) { transform: rotate(-7.4deg); }
        .card:nth-child(4) { transform: rotate(-7.2deg); }
        .card:nth-child(5) { transform: rotate(-7deg); }
        .card:nth-child(6) { transform: rotate(-6.8deg); }
        .card:nth-child(7) { transform: rotate(-6.6deg); }
        .card:nth-child(8) { transform: rotate(-6.4deg); }
        .card:nth-child(9) { transform: rotate(-6.2deg); }
        .card:nth-child(10) { transform: rotate(-6deg); }
        .card:nth-child(11) { transform: rotate(-5.8deg); }
        .card:nth-child(12) { transform: rotate(-5.6deg); }
        .card:nth-child(13) { transform: rotate(-5.4deg); }
        .card:nth-child(14) { transform: rotate(-5.2deg); }
        .card:nth-child(15) { transform: rotate(-5deg); }
        .card:nth-child(16) { transform: rotate(-4.8deg); }
        .card:nth-child(17) { transform: rotate(-4.6deg); }
        .card:nth-child(18) { transform: rotate(-4.4deg); }
        .card:nth-child(19) { transform: rotate(-4.2deg); }
        .card:nth-child(20) { transform: rotate(-4deg); }
        .card:nth-child(21) { transform: rotate(-3.8deg); }
        .card:nth-child(22) { transform: rotate(-3.6deg); }
        .card:nth-child(23) { transform: rotate(-3.4deg); }
        .card:nth-child(24) { transform: rotate(-3.2deg); }
        .card:nth-child(25) { transform: rotate(-3deg); }
        .card:nth-child(26) { transform: rotate(-2.8deg); }
        .card:nth-child(27) { transform: rotate(-2.6deg); }
        .card:nth-child(28) { transform: rotate(-2.4deg); }
        .card:nth-child(29) { transform: rotate(-2.2deg); }
        .card:nth-child(30) { transform: rotate(-2deg); }
        .card:nth-child(31) { transform: rotate(-1.8deg); }
        .card:nth-child(32) { transform: rotate(-1.6deg); }
        .card:nth-child(33) { transform: rotate(-1.4deg); }
        .card:nth-child(34) { transform: rotate(-1.2deg); }
        .card:nth-child(35) { transform: rotate(-1deg); }
        .card:nth-child(36) { transform: rotate(-0.8deg); }
        .card:nth-child(37) { transform: rotate(-0.6deg); }
        .card:nth-child(38) { transform: rotate(-0.4deg); }
        .card:nth-child(39) { transform: rotate(-0.2deg); }
        .card:nth-child(40) { transform: rotate(0deg); }
        .card:nth-child(41) { transform: rotate(0.2deg); }
        .card:nth-child(42) { transform: rotate(0.4deg); }
        .card:nth-child(43) { transform: rotate(0.6deg); }
        .card:nth-child(44) { transform: rotate(0.8deg); }
        .card:nth-child(45) { transform: rotate(1deg); }
        .card:nth-child(46) { transform: rotate(1.2deg); }
        .card:nth-child(47) { transform: rotate(1.4deg); }
        .card:nth-child(48) { transform: rotate(1.6deg); }
        .card:nth-child(49) { transform: rotate(1.8deg); }
        .card:nth-child(50) { transform: rotate(2deg); }
        .card:nth-child(51) { transform: rotate(2.2deg); }
        .card:nth-child(52) { transform: rotate(2.4deg); }
        .card:nth-child(53) { transform: rotate(2.6deg); }
        .card:nth-child(54) { transform: rotate(2.8deg); }
        .card:nth-child(55) { transform: rotate(3deg); }
        .card:nth-child(56) { transform: rotate(3.2deg); }
        .card:nth-child(57) { transform: rotate(3.4deg); }
        .card:nth-child(58) { transform: rotate(3.6deg); }
        .card:nth-child(59) { transform: rotate(3.8deg); }
        .card:nth-child(60) { transform: rotate(4deg); }
        .card:nth-child(61) { transform: rotate(4.2deg); }
        .card:nth-child(62) { transform: rotate(4.4deg); }
        .card:nth-child(63) { transform: rotate(4.6deg); }
        .card:nth-child(64) { transform: rotate(4.8deg); }
        .card:nth-child(65) { transform: rotate(5deg); }
        .card:nth-child(66) { transform: rotate(5.2deg); }
        .card:nth-child(67) { transform: rotate(5.4deg); }
        .card:nth-child(68) { transform: rotate(5.6deg); }
        .card:nth-child(69) { transform: rotate(5.8deg); }
        .card:nth-child(70) { transform: rotate(6deg); }
        .card:nth-child(71) { transform: rotate(6.2deg); }
        .card:nth-child(72) { transform: rotate(6.4deg); }
        .card:nth-child(73) { transform: rotate(6.6deg); }
        .card:nth-child(74) { transform: rotate(6.8deg); }
        .card:nth-child(75) { transform: rotate(7deg); }
        .card:nth-child(76) { transform: rotate(7.2deg); }
        .card:nth-child(77) { transform: rotate(7.4deg); }
        .card:nth-child(78) { transform: rotate(7.6deg); }

        /* 카드 선택 시 위로만 이동 (가로 위치 고정) */
        .card:hover {
            transform: translateY(-10px); /* Y축만 이동 */
            z-index: 1; /* 카드가 위로 올라오게 하기 */
        }
    </style>
</head>
<body>
<nav th:replace="~{navbar :: navbarFragment}"></nav>
    <h1>당신의 카드를 뽑으세요 <span style="color: hotpink;">OHAYo 타로</span></h1>
    <h2>당신과 가장 강한 에너지 연결을 느끼는 카드를 선택하세요</h2>
    <h6>주로 사용하지 않는 손으로 뽑으시는 것을 추천드립니다</h6>
    <button onclick="gatherCards()" id="shuffleButton">다시 섞기</button>
        <div class="card-container">
            <div th:each="card : ${rcCardId}" class="card" th:data-id="${card.rcid}" th:onclick="'window.location.href=\'/categories/romantic/result/' + ${card.rcid} + '\';'">
                <!-- 카드 뒷면만 표시, 클릭 시 결과 페이지로 이동 -->
            </div>
        </div>
<script>
    function gatherCards() {
        const cards = Array.from(document.querySelectorAll('.card'));
        const originalPositions = cards.map(card => card.getBoundingClientRect());
        const originalTransforms = cards.map(card => card.style.transform);
        const originalIds = cards.map(card => card.getAttribute('data-id'));
        const shuffledIds = originalIds.sort(() => Math.random() - 0.5);

        // 중앙으로 모으기
        cards.forEach((card, index) => {
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const cardX = originalPositions[index].left + originalPositions[index].width / 2;
            const cardY = originalPositions[index].top + originalPositions[index].height / 2;
            const translateX = centerX - cardX;
            const translateY = centerY - cardY;
            card.style.transition = 'transform 0.5s ease';
            card.style.transform = `translate(${translateX}px, ${translateY}px) scale(1)`;
        });

        // 1초 후에 다시 펼치면서 카드 ID도 섞기
        setTimeout(() => {
            cards.forEach((card, index) => {
                card.setAttribute('data-id', shuffledIds[index]);
                card.style.transform = originalTransforms[index];
            });
        }, 1000);
    }
</script>
</body>
</html>
